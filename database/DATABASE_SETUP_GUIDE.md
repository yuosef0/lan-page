# ๐ ุฏููู ุฅูุดุงุก ูุงุนุฏุฉ ุงูุจูุงูุงุช ูู ุงูุตูุฑ
# Complete Database Setup Guide - Apex & Base Construction Portfolio

---

## ๐ ุฌุฏูู ุงููุญุชููุงุช

1. [ูุธุฑุฉ ุนุงูุฉ](#ูุธุฑุฉ-ุนุงูุฉ)
2. [ุงููุชุทูุจุงุช ุงูุฃุณุงุณูุฉ](#ุงููุชุทูุจุงุช-ุงูุฃุณุงุณูุฉ)
3. [ุฅูุดุงุก ูุดุฑูุน Supabase](#ุฅูุดุงุก-ูุดุฑูุน-supabase)
4. [ุฅุนุฏุงุฏ ูุงุนุฏุฉ ุงูุจูุงูุงุช](#ุฅุนุฏุงุฏ-ูุงุนุฏุฉ-ุงูุจูุงูุงุช)
5. [ุฅุนุฏุงุฏ Storage Buckets](#ุฅุนุฏุงุฏ-storage-buckets)
6. [ุฅุนุฏุงุฏ ุงููุตุงุฏูุฉ (Authentication)](#ุฅุนุฏุงุฏ-ุงููุตุงุฏูุฉ)
7. [ุฑุจุท ุงููุดุฑูุน ุจูุงุนุฏุฉ ุงูุจูุงูุงุช](#ุฑุจุท-ุงููุดุฑูุน-ุจูุงุนุฏุฉ-ุงูุจูุงูุงุช)
8. [ุงูุชุญูู ูู ุงูุชุซุจูุช](#ุงูุชุญูู-ูู-ุงูุชุซุจูุช)
9. [ุงุณุชูุดุงู ุงูุฃุฎุทุงุก](#ุงุณุชูุดุงู-ุงูุฃุฎุทุงุก)
10. [ูุนูููุงุช ูููุฉ ุนู RLS](#ูุนูููุงุช-ูููุฉ-ุนู-rls)

---

## ๐ฏ ูุธุฑุฉ ุนุงูุฉ

ูุฐุง ุงูุฏููู ูุดุฑุญ ุฎุทูุฉ ุจุฎุทูุฉ ููููุฉ ุฅูุดุงุก ูุงุนุฏุฉ ุจูุงูุงุช ูุงููุฉ ููููุน **Apex & Base Construction Portfolio** ูู ุงูุตูุฑ ุจุงุณุชุฎุฏุงู **Supabase**.

### ูุงุนุฏุฉ ุงูุจูุงูุงุช ุชุญุชูู ุนูู:

โ **10 ุฌุฏุงูู (Tables)**:
- `home_page` - ูุญุชูู ุงูุตูุญุฉ ุงูุฑุฆูุณูุฉ
- `feature_cards` - ูุฑูุช ุงููููุฒุงุช
- `about_page` - ูุญุชูู ุตูุญุฉ About
- `principles` - ูุจุงุฏุฆ ุงูุดุฑูุฉ
- `team_members` - ุฃุนุถุงุก ุงููุฑูู
- `services_page` - ูุญุชูู ุตูุญุฉ ุงูุฎุฏูุงุช
- `services` - ูุงุฆูุฉ ุงูุฎุฏูุงุช
- `contact_info` - ูุนูููุงุช ุงูุงุชุตุงู ูุงูููุชุฑ
- `contact_submissions` - ุฑุณุงุฆู ุงูุฒูุงุฑ
- `site_settings` - ุฅุนุฏุงุฏุงุช ุงููููุน ูุงูููุฌู

โ **ุณูุงุณุงุช ุฃูููุฉ (RLS Policies)** ูุญูุงูุฉ ุงูุจูุงูุงุช

โ **Triggers ุชููุงุฆูุฉ** ูุชุญุฏูุซ ุชูุงุฑูุฎ ุงูุชุนุฏูู

โ **Indexes** ูุชุญุณูู ุงูุฃุฏุงุก

---

## ๐ง ุงููุชุทูุจุงุช ุงูุฃุณุงุณูุฉ

ูุจู ุงูุจุฏุกุ ุชุฃูุฏ ูู ุชููุฑ:

1. โ ุญุณุงุจ ุนูู [Supabase](https://supabase.com) (ูุฌุงูู)
2. โ ูุชุตูุญ ููุจ ุญุฏูุซ (Chrome, Firefox, Edge, Safari)
3. โ ุงูููู `complete_database_schema.sql` (ููุฌูุฏ ูู ููุณ ุงููุฌูุฏ)

---

## ๐ ุฅูุดุงุก ูุดุฑูุน Supabase

### ุงูุฎุทูุฉ 1๏ธโฃ: ุฅูุดุงุก ุญุณุงุจ ุฌุฏูุฏ

1. ุงุฐูุจ ุฅูู [supabase.com](https://supabase.com)
2. ุงุถุบุท **Start your project**
3. ุณุฌู ุงูุฏุฎูู ุจุงุณุชุฎุฏุงู:
   - GitHub (ููุตู ุจู)
   - ุฃู Google
   - ุฃู Email

### ุงูุฎุทูุฉ 2๏ธโฃ: ุฅูุดุงุก ูุดุฑูุน ุฌุฏูุฏ

1. ูู ููุญุฉ ุงูุชุญููุ ุงุถุบุท **New Project**
2. ุงุฎุชุฑ **Organization** (ุฃู ุฃูุดุฆ ูุงุญุฏุฉ ุฌุฏูุฏุฉ)
3. ุงููุฃ ุงูุจูุงูุงุช ุงูุชุงููุฉ:

   ```
   ๐ Name: apex-base-portfolio
   ๐ Database Password: [ุงุฎุชุฑ ูููุฉ ูุฑูุฑ ูููุฉ]
      โ๏ธ ููู ุฌุฏุงู: ุงุญูุธ ูููุฉ ุงููุฑูุฑ ูู ููุงู ุขูู!
   ๐ Region: ุงุฎุชุฑ ุงูุฃูุฑุจ ูุฌูููุฑู
      - Middle East (UAE): me-central-1
      - Europe: eu-west-1
      - US East: us-east-1
   ๐ฐ Pricing Plan: Free (ูุงูู ููุจุฏุงูุฉ)
   ```

4. ุงุถุบุท **Create new project**
5. ุงูุชุธุฑ 2-3 ุฏูุงุฆู ุญุชู ูุชู ุฅูุดุงุก ุงููุดุฑูุน

### ุงูุฎุทูุฉ 3๏ธโฃ: ุงุญุชูุธ ุจุจูุงูุงุช ุงููุดุฑูุน

ุจุนุฏ ุฅูุดุงุก ุงููุดุฑูุนุ ุณุชุญุชุงุฌ:

```env
# ุณุชุฌุฏ ูุฐู ุงููุนูููุงุช ูู: Project Settings > API

NEXT_PUBLIC_SUPABASE_URL=https://xxxxxxxxxxxxx.supabase.co
NEXT_PUBLIC_SUPABASE_ANON_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...
```

โ๏ธ **ุงุญูุธ ูุฐู ุงูููู ูู ููู `.env.local`**

---

## ๐๏ธ ุฅุนุฏุงุฏ ูุงุนุฏุฉ ุงูุจูุงูุงุช

### ุงูุฎุทูุฉ 1๏ธโฃ: ูุชุญ SQL Editor

1. ูู ุงููุงุฆูุฉ ุงููุณุฑูุ ุงุถุบุท ุนูู ุฃููููุฉ **SQL Editor** (ุฃููููุฉ `</>`)
2. ุงุถุบุท **New query** ููุชุญ ูุญุฑุฑ SQL ุฌุฏูุฏ

### ุงูุฎุทูุฉ 2๏ธโฃ: ุชุดุบูู ุณูุฑูุจุช ูุงุนุฏุฉ ุงูุจูุงูุงุช

#### ุงูุทุฑููุฉ ุงูุฃููู: ูุณุฎ ููุตู (ููุตู ุจูุง)

1. ุงูุชุญ ููู `complete_database_schema.sql` ุจุฃู ูุญุฑุฑ ูุตูุต
2. ุงูุณุฎ **ูุงูู** ูุญุชููุงุช ุงูููู (Ctrl+A ุซู Ctrl+C)
3. ุงูุตู ูู SQL Editor ูู Supabase (Ctrl+V)
4. ุงุถุบุท **Run** ุฃู ุงุถุบุท `Ctrl+Enter`

#### ุงูุทุฑููุฉ ุงูุซุงููุฉ: ุฑูุน ุงูููู

1. ูู SQL Editorุ ุงุถุบุท ุนูู ุฒุฑ **Upload SQL**
2. ุงุฎุชุฑ ููู `complete_database_schema.sql`
3. ุงุถุบุท **Run**

### ุงูุฎุทูุฉ 3๏ธโฃ: ุงูุชุญูู ูู ูุฌุงุญ ุงูุฅูุดุงุก

ุจุนุฏ ุชุดุบูู ุงูุณูุฑูุจุชุ ูุฌุจ ุฃู ุชุฑู:

```
โ Success. No rows returned
```

ููุชุญูู ูู ุฅูุดุงุก ุงูุฌุฏุงููุ ูู ุจุชุดุบูู:

```sql
SELECT table_name
FROM information_schema.tables
WHERE table_schema = 'public'
ORDER BY table_name;
```

**ูุฌุจ ุฃู ุชุฑู 10 ุฌุฏุงูู:**

```
โ about_page
โ contact_info
โ contact_submissions
โ feature_cards
โ home_page
โ principles
โ services
โ services_page
โ site_settings
โ team_members
```

### ุงูุฎุทูุฉ 4๏ธโฃ: ุงูุชุญูู ูู ุงูุจูุงูุงุช ุงูุงูุชุฑุงุถูุฉ

ูุฑุคูุฉ ุงูุจูุงูุงุช ุงูุงูุชุฑุงุถูุฉ ุงูุชู ุชู ุฅุฏุฑุงุฌูุง:

```sql
-- ุนุฑุถ ูุญุชูู ุงูุตูุญุฉ ุงูุฑุฆูุณูุฉ
SELECT * FROM home_page;

-- ุนุฑุถ ูุฑูุช ุงููููุฒุงุช (ูุฌุจ ุฃู ูููู 3)
SELECT title, "order" FROM feature_cards ORDER BY "order";

-- ุนุฑุถ ุงูุฎุฏูุงุช (ูุฌุจ ุฃู ูููู 3)
SELECT title, is_active FROM services ORDER BY "order";

-- ุนุฑุถ ุฃุนุถุงุก ุงููุฑูู (ูุฌุจ ุฃู ูููู 4)
SELECT name, position FROM team_members ORDER BY "order";
```

---

## ๐ฆ ุฅุนุฏุงุฏ Storage Buckets

Storage Buckets ุชุณุชุฎุฏู ูุญูุธ ุงูุตูุฑ ูุงููููุงุช.

### ุงูุฎุทูุฉ 1๏ธโฃ: ุฅูุดุงุก Bucket ููุตูุฑ

1. ูู ุงููุงุฆูุฉ ุงููุณุฑูุ ุงุถุบุท **Storage**
2. ุงุถุบุท **Create a new bucket**
3. ุงููุฃ ุงูุชุงูู:

   ```
   ๐ฆ Name: images
   โ Public bucket: ููุนูู (ON)
   ๐ File size limit: 5 MB
   ๐ Allowed MIME types: image/*
   ```

4. ุงุถุบุท **Create bucket**

### ุงูุฎุทูุฉ 2๏ธโฃ: ุฅูุดุงุก ุงููุฌูุฏุงุช (Folders)

ุฏุงุฎู bucket `images`ุ ุฃูุดุฆ ุงููุฌูุฏุงุช ุงูุชุงููุฉ:

```
๐ images/
  โโโ ๐ home/          (ุตูุฑ ุงูุตูุญุฉ ุงูุฑุฆูุณูุฉ)
  โโโ ๐ about/         (ุตูุฑ ุตูุญุฉ About)
  โโโ ๐ services/      (ุตูุฑ ุงูุฎุฏูุงุช)
  โโโ ๐ team/          (ุตูุฑ ุฃุนุถุงุก ุงููุฑูู)
  โโโ ๐ branding/      (ุงูููุฌู ูุงูุนูุงูุฉ ุงูุชุฌุงุฑูุฉ)
  โโโ ๐ uploads/       (ุฑููุนุงุช ุนุงูุฉ)
```

**ููููุฉ ุฅูุดุงุก ูุฌูุฏ:**
1. ุงุถุบุท ุนูู bucket `images`
2. ุงุถุบุท **Upload** > **Create folder**
3. ุฃุฏุฎู ุงุณู ุงููุฌูุฏ (ูุซูุงู: `home`)
4. ูุฑุฑ ุงูุนูููุฉ ูุจููุฉ ุงููุฌูุฏุงุช

### ุงูุฎุทูุฉ 3๏ธโฃ: ุฅุนุฏุงุฏ ุณูุงุณุงุช Storage

ูุชูููู ุฑูุน ุงูุตูุฑุ ุฃูุดุฆ ุงูุณูุงุณุงุช ุงูุชุงููุฉ:

1. ุงุฐูุจ ุฅูู **Storage** > **Policies**
2. ุงุฎุชุฑ bucket `images`
3. ุงุถุบุท **New Policy**

#### ุณูุงุณุฉ ุงููุฑุงุกุฉ ุงูุนุงูุฉ (Public Read):

```sql
CREATE POLICY "Public Access"
ON storage.objects FOR SELECT
USING ( bucket_id = 'images' );
```

#### ุณูุงุณุฉ ุงูุฑูุน ูููุตุงุฏููู ููุท (Authenticated Upload):

```sql
CREATE POLICY "Authenticated users can upload"
ON storage.objects FOR INSERT
WITH CHECK (
  bucket_id = 'images'
  AND auth.role() = 'authenticated'
);
```

#### ุณูุงุณุฉ ุงูุชุนุฏูู ูุงูุญุฐู:

```sql
CREATE POLICY "Authenticated users can update/delete"
ON storage.objects FOR UPDATE
USING (
  bucket_id = 'images'
  AND auth.role() = 'authenticated'
);

CREATE POLICY "Authenticated users can delete"
ON storage.objects FOR DELETE
USING (
  bucket_id = 'images'
  AND auth.role() = 'authenticated'
);
```

---

## ๐ ุฅุนุฏุงุฏ ุงููุตุงุฏูุฉ (Authentication)

### ุงูุฎุทูุฉ 1๏ธโฃ: ุชูุนูู Email Authentication

1. ูู ุงููุงุฆูุฉ ุงููุณุฑูุ ุงุถุบุท **Authentication**
2. ุงุถุบุท **Providers**
3. ุงุจุญุซ ุนู **Email**
4. ุชุฃูุฏ ุฃูู **ููุนูู** (Enabled)

### ุงูุฎุทูุฉ 2๏ธโฃ: ุฅุถุงูุฉ ูุณุชุฎุฏู Admin

#### ูู ููุญุฉ ุงูุชุญูู:

1. ุงุฐูุจ ุฅูู **Authentication** > **Users**
2. ุงุถุบุท **Add user** > **Create new user**
3. ุงููุฃ ุงูุจูุงูุงุช:

   ```
   ๐ง Email: admin@apexbase.com
   ๐ Password: [ูููุฉ ูุฑูุฑ ูููุฉ]
   โ Auto Confirm User: ููุนูู
   ```

4. ุงุถุบุท **Create user**

#### ุฃู ุนุจุฑ SQL:

```sql
-- ุฅูุดุงุก ูุณุชุฎุฏู admin
-- ุงุณุชุจุฏู ุงูุจุฑูุฏ ููููุฉ ุงููุฑูุฑ
INSERT INTO auth.users (
  email,
  encrypted_password,
  email_confirmed_at,
  raw_app_meta_data,
  raw_user_meta_data,
  created_at,
  updated_at,
  role
)
VALUES (
  'admin@apexbase.com',
  crypt('your_password_here', gen_salt('bf')),
  NOW(),
  '{"provider":"email","providers":["email"]}',
  '{}',
  NOW(),
  NOW(),
  'authenticated'
);
```

โ๏ธ **ููู**: ุงุญูุธ ุจูุงูุงุช ุงูุฏุฎูู ูู ููุงู ุขูู!

### ุงูุฎุทูุฉ 3๏ธโฃ: ุฅุนุฏุงุฏุงุช ุฅุถุงููุฉ (ุงุฎุชูุงุฑู)

ูู **Authentication** > **Settings**:

```
๐ Site URL: http://localhost:3000 (ููุชุทููุฑ)
           ุฃู https://yourdomain.com (ููุฅูุชุงุฌ)

๐ง Mailer settings:
   - From email: noreply@yourdomain.com
   - From name: Apex & Base

โฑ๏ธ JWT expiry: 3600 (ุณุงุนุฉ ูุงุญุฏุฉ)
```

---

## ๐ ุฑุจุท ุงููุดุฑูุน ุจูุงุนุฏุฉ ุงูุจูุงูุงุช

### ุงูุฎุทูุฉ 1๏ธโฃ: ุฅูุดุงุก ููู `.env.local`

ูู ูุฌูุฏ ุงููุดุฑูุนุ ุฃูุดุฆ ููู `.env.local`:

```bash
# ูู terminal:
touch .env.local
```

ุฃู ุฃูุดุฆู ูุฏููุงู.

### ุงูุฎุทูุฉ 2๏ธโฃ: ุฅุถุงูุฉ ุจูุงูุงุช ุงูุงุชุตุงู

ุงูุชุญ `.env.local` ูุฃุถู:

```env
# Supabase Configuration
NEXT_PUBLIC_SUPABASE_URL=https://xxxxxxxxxxxxx.supabase.co
NEXT_PUBLIC_SUPABASE_ANON_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Inh4eHh4eHh4eHh4eHgiLCJyb2xlIjoiYW5vbiIsImlhdCI6MTYyMDAwMDAwMCwiZXhwIjoxOTM1NTc2MDAwfQ.xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx

# Database Direct Connection (ููุฅูุชุงุฌ ููุท)
# DATABASE_URL=postgresql://postgres:[password]@db.xxxxxxxxxxxxx.supabase.co:5432/postgres
```

**ููููุฉ ุงูุญุตูู ุนูู ุงูููู:**

1. ูู ููุญุฉ ุชุญูู Supabaseุ ุงุฐูุจ ุฅูู **Project Settings** (โ๏ธ)
2. ุงุถุบุท **API**
3. ุงูุณุฎ:
   - **Project URL** โ `NEXT_PUBLIC_SUPABASE_URL`
   - **anon public** key โ `NEXT_PUBLIC_SUPABASE_ANON_KEY`

### ุงูุฎุทูุฉ 3๏ธโฃ: ุฅุถุงูุฉ `.env.local` ูู `.gitignore`

โ๏ธ **ููู ุฌุฏุงู**: ูุง ุชุฑูุน ููู `.env.local` ุฅูู Git!

ุชุฃูุฏ ูู ูุฌูุฏ ุงูุณุทุฑ ุงูุชุงูู ูู `.gitignore`:

```gitignore
# Local env files
.env.local
.env*.local
```

---

## โ ุงูุชุญูู ูู ุงูุชุซุจูุช

### 1๏ธโฃ ุงุฎุชุจุงุฑ ุงูุงุชุตุงู ุจูุงุนุฏุฉ ุงูุจูุงูุงุช

ุดุบู ุงููุดุฑูุน:

```bash
npm run dev
```

ุงูุชุญ ุงููุชุตูุญ ุนูู: `http://localhost:3000`

### 2๏ธโฃ ุงุฎุชุจุงุฑ ุงูุตูุญุงุช

ุชุญูู ูู:

- โ **ุงูุตูุญุฉ ุงูุฑุฆูุณูุฉ** (`/`) - ูุฌุจ ุฃู ุชุนุฑุถ Hero + 3 ูุฑูุช
- โ **ุตูุญุฉ About** (`/about`) - ูุฌุจ ุฃู ุชุนุฑุถ Mission, Values, Principles, Team
- โ **ุตูุญุฉ Services** (`/services`) - ูุฌุจ ุฃู ุชุนุฑุถ 3 ุฎุฏูุงุช
- โ **ุตูุญุฉ Contact** (`/contact`) - ูุฌุจ ุฃู ุชุนุฑุถ ูุนูููุงุช ุงูุงุชุตุงู

### 3๏ธโฃ ุงุฎุชุจุงุฑ ููุญุฉ ุงูุฅุฏุงุฑุฉ

1. ุงุฐูุจ ุฅูู: `http://localhost:3000/admin/login`
2. ุณุฌู ุงูุฏุฎูู ุจุงุณุชุฎุฏุงู:
   ```
   Email: admin@apexbase.com
   Password: [ูููุฉ ุงููุฑูุฑ ุงูุชู ุฃูุดุฃุชูุง]
   ```
3. ูุฌุจ ุฃู ุชุฏุฎู ุฅูู `/admin/dashboard`

### 4๏ธโฃ ุงุฎุชุจุงุฑ ุงูุชุนุฏูู

ูู ููุญุฉ ุงูุฅุฏุงุฑุฉ:

1. ุงุฐูุจ ุฅูู **Home Page**
2. ุบููุฑ ุนููุงู Hero
3. ุงุถุบุท **Save Changes**
4. ูุฌุจ ุฃู ุชุธูุฑ ุฑุณุงูุฉ ูุฌุงุญ ุจุงููุบุฉ ุงูุนุฑุจูุฉ
5. ุชุญูู ูู ุงูุตูุญุฉ ุงูุฑุฆูุณูุฉ - ูุฌุจ ุฃู ูุธูุฑ ุงูุชุบููุฑ

### 5๏ธโฃ ุงุฎุชุจุงุฑ ุฑูุน ุงูุตูุฑ

1. ุงุฐูุจ ุฅูู **Site Settings**
2. ุงุถุบุท **Upload Image**
3. ุงุฑูุน ุตูุฑุฉ ูููุฌู
4. ูุฌุจ ุฃู ูุชู ุงูุฑูุน ุจูุฌุงุญ
5. ุชุญูู ูู Storage ูู Supabase - ูุฌุจ ุฃู ุชุฌุฏ ุงูุตูุฑุฉ ูู `images/branding/`

---

## ๐ ุงุณุชูุดุงู ุงูุฃุฎุทุงุก

### โ ุฎุทุฃ: "Failed to fetch" ุนูุฏ ุชุดุบูู ุงููุดุฑูุน

**ุงูุณุจุจ**: ูุดููุฉ ูู ุงูุงุชุตุงู ุจู Supabase

**ุงูุญู**:
1. ุชุฃูุฏ ูู ุตุญุฉ `NEXT_PUBLIC_SUPABASE_URL`
2. ุชุฃูุฏ ูู ุตุญุฉ `NEXT_PUBLIC_SUPABASE_ANON_KEY`
3. ุชุฃูุฏ ูู ุฅุนุงุฏุฉ ุชุดุบูู ุงูุณูุฑูุฑ ุจุนุฏ ุชุบููุฑ `.env.local`

```bash
# ุฃููู ุงูุณูุฑูุฑ (Ctrl+C)
# ุซู ุดุบูู ูู ุฌุฏูุฏ
npm run dev
```

### โ ุฎุทุฃ: "Row Level Security" ุนูุฏ ูุญุงููุฉ ุงููุฑุงุกุฉ

**ุงูุณุจุจ**: RLS ููุนูู ูููู ูุง ุชูุฌุฏ ุณูุงุณุงุช

**ุงูุญู**:
1. ุชุฃูุฏ ูู ุชุดุบูู ูุงูู ููู `complete_database_schema.sql`
2. ุฃู ุฃุถู ุงูุณูุงุณุงุช ูุฏููุงู (ุฑุงุฌุน ูุณู RLS)

### โ ุฎุทุฃ: "duplicate key value" ุนูุฏ ุชุดุบูู ุงูุณูุฑูุจุช

**ุงูุณุจุจ**: ุงูุณูุฑูุจุช ุชู ุชุดุบููู ูุฑุชูู

**ุงูุญู**:
ุงูุณูุฑูุจุช ูุญุชูู ุนูู `ON CONFLICT DO NOTHING` - ููููู ุชุฌุงูู ุงูุฎุทุฃ.
ุฃู ุงุญุฐู ุงูุฌุฏุงูู ูุฃุนุฏ ุงูุชุดุบูู:

```sql
-- ุญุฐู ุฌููุน ุงูุฌุฏุงูู (โ๏ธ ุฎุทุฑ!)
DROP TABLE IF EXISTS contact_submissions CASCADE;
DROP TABLE IF EXISTS contact_info CASCADE;
DROP TABLE IF EXISTS services CASCADE;
DROP TABLE IF EXISTS services_page CASCADE;
DROP TABLE IF EXISTS team_members CASCADE;
DROP TABLE IF EXISTS principles CASCADE;
DROP TABLE IF EXISTS about_page CASCADE;
DROP TABLE IF EXISTS feature_cards CASCADE;
DROP TABLE IF EXISTS home_page CASCADE;
DROP TABLE IF EXISTS site_settings CASCADE;

-- ุซู ุดุบู ุงูุณูุฑูุจุช ูู ุฌุฏูุฏ
```

### โ ุฎุทุฃ: ูุง ูููู ุฑูุน ุงูุตูุฑ

**ุงูุณุจุจ**: Storage policies ุบูุฑ ุตุญูุญุฉ

**ุงูุญู**:
1. ุงุฐูุจ ุฅูู **Storage** > **Policies**
2. ุชุฃูุฏ ูู ูุฌูุฏ ุงูุณูุงุณุงุช ุงูุฃุฑุจุนุฉ (ุฑุงุฌุน ูุณู Storage)
3. ุชุฃูุฏ ูู ุฃู bucket `images` **Public**

### โ ุฎุทุฃ: ูุง ูููู ุชุณุฌูู ุงูุฏุฎูู ููุฅุฏุงุฑุฉ

**ุงูุณุจุจ**: ุงููุณุชุฎุฏู ุบูุฑ ููุฌูุฏ ุฃู ุงูุจุฑูุฏ ุบูุฑ ูุคูุฏ

**ุงูุญู**:
```sql
-- ุงูุชุญูู ูู ุงููุณุชุฎุฏููู
SELECT id, email, email_confirmed_at
FROM auth.users;

-- ุชุฃููุฏ ุงูุจุฑูุฏ ูุฏููุงู
UPDATE auth.users
SET email_confirmed_at = NOW()
WHERE email = 'admin@apexbase.com';
```

---

## ๐ก๏ธ ูุนูููุงุช ูููุฉ ุนู RLS

### ูุง ูู RLSุ

**Row Level Security (RLS)** = ุฃูุงู ุนูู ูุณุชูู ุงูุตููู

ูุนูู: ุงูุชุญูู ูู ูู ููุฏุฑ ููุฑุฃ/ููุชุจ/ูุนุฏู/ูุญุฐู ูู ุตู ูู ุงูุฌุฏูู.

### ุงูุณูุงุณุงุช ุงููุทุจูุฉ:

#### 1๏ธโฃ ููุฒูุงุฑ (Public)

```sql
โ ููุฏุฑ ููุฑุฃ ูู ุดูุก (SELECT)
โ ูุง ููุฏุฑ ูุนุฏู ุฃู ูุญุฐู
โ ููุฏุฑ ูุฑุณู ูููุฐุฌ ุชูุงุตู (INSERT ูู contact_submissions ููุท)
```

#### 2๏ธโฃ ูููุณุชุฎุฏููู ุงููุตุงุฏููู (Authenticated)

```sql
โ ููุฏุฑ ููุฑุฃ ูู ุดูุก (SELECT)
โ ููุฏุฑ ูุนุฏู ูู ุดูุก (UPDATE)
โ ููุฏุฑ ูุถูู ูู ุดูุก (INSERT)
โ ููุฏุฑ ูุญุฐู ูู ุดูุก (DELETE)
```

### ูุซุงู ุนูู Policy:

```sql
-- ุงูุฒูุงุฑ ููุฏุฑูุง ููุฑูุง ุจุณ
CREATE POLICY "public_read_home_page"
  ON home_page FOR SELECT
  USING (true);

-- ุงููุตุงุฏููู ุนูููู ููุฏุฑูุง ูุนูููุง ูู ุดูุก
CREATE POLICY "authenticated_full_access_home_page"
  ON home_page FOR ALL
  USING (auth.role() = 'authenticated');
```

### ููู ุชุดูู ุงูุณูุงุณุงุช ุงูููุฌูุฏุฉุ

```sql
SELECT
  schemaname,
  tablename,
  policyname,
  permissive,
  roles,
  cmd
FROM pg_policies
WHERE schemaname = 'public'
ORDER BY tablename, policyname;
```

---

## ๐ ูููู ูุงุนุฏุฉ ุงูุจูุงูุงุช - ERD

```
โโโโโโโโโโโโโโโโโโโ
โ   home_page     โ
โ   (1 row)       โ
โโโโโโโโโโโโโโโโโโโ

โโโโโโโโโโโโโโโโโโโ
โ feature_cards   โ
โ   (3+ rows)     โ
โ  order: 1,2,3   โ
โโโโโโโโโโโโโโโโโโโ

โโโโโโโโโโโโโโโโโโโ      โโโโโโโโโโโโโโโโ
โ  about_page     โ      โ  principles  โ
โ   (1 row)       โ      โ  (3+ rows)   โ
โ                 โ      โ order: 1,2,3 โ
โ show_mission    โ      โโโโโโโโโโโโโโโโ
โ show_values     โ
โ show_principles โ      โโโโโโโโโโโโโโโโ
โ show_team       โ      โ team_members โ
โโโโโโโโโโโโโโโโโโโ      โ  (4+ rows)   โ
                         โ order: 1,2,3,4โ
                         โโโโโโโโโโโโโโโโ

โโโโโโโโโโโโโโโโโโโ      โโโโโโโโโโโโโโโโ
โ services_page   โ      โ  services    โ
โ   (1 row)       โ      โ  (3+ rows)   โ
โ                 โ      โ is_active: T โ
โโโโโโโโโโโโโโโโโโโ      โ order: 1,2,3 โ
                         โโโโโโโโโโโโโโโโ

โโโโโโโโโโโโโโโโโโโโโโโโ
โ    contact_info      โ
โ      (1 row)         โ
โ                      โ
โ โข Contact details    โ
โ โข Social media links โ
โ โข Footer content     โ
โโโโโโโโโโโโโโโโโโโโโโโโ

โโโโโโโโโโโโโโโโโโโโโโโโ
โ contact_submissions  โ
โ     (many rows)      โ
โ                      โ
โ type: general/vendor โ
โ status: new/read/... โ
โโโโโโโโโโโโโโโโโโโโโโโโ

โโโโโโโโโโโโโโโโโโโ
โ site_settings   โ
โ   (1 row)       โ
โ                 โ
โ โข logo_url      โ
โ โข site_name     โ
โโโโโโโโโโโโโโโโโโโ
```

---

## ๐ ููุงุญุธุงุช ูููุฉ

### โ Do's (ุงูุนู):

1. โ **ุงุญุชูุธ ุจูุณุฎุฉ ุงุญุชูุงุทูุฉ** ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช ุจุงูุชุธุงู
2. โ **ุงุณุชุฎุฏู Environment Variables** ูุญูุธ ุงูููุงุชูุญ ุงูุณุฑูุฉ
3. โ **ุบูุฑ ูููุงุช ุงููุฑูุฑ** ุงูุงูุชุฑุงุถูุฉ
4. โ **ุชุฃูุฏ ูู RLS ููุนูู** ุนูู ุฌููุน ุงูุฌุฏุงูู
5. โ **ุฑุงุฌุน Logs** ูู Supabase ููุฑุงูุจุฉ ุงูุฃุฎุทุงุก

### โ Don'ts (ูุง ุชูุนู):

1. โ **ูุง ุชุฑูุน** `.env.local` ุฅูู Git
2. โ **ูุง ุชุณุชุฎุฏู** `service_role key` ูู ุงูู Frontend
3. โ **ูุง ุชุนุทู** RLS ุฅูุง ุฅุฐุง ููุช ูุชุฃูุฏ
4. โ **ูุง ุชุดุงุฑู** Database Password ูุน ุฃุญุฏ
5. โ **ูุง ุชุญุฐู** ุงูุฌุฏุงูู ูู ุงูุฅูุชุงุฌ ุจุฏูู backup

---

## ๐ ุนูู Backup ููุงุนุฏุฉ ุงูุจูุงูุงุช

### ูู ููุญุฉ ุชุญูู Supabase:

1. ุงุฐูุจ ุฅูู **Database** > **Backups**
2. Supabase ูุนูู backup ุชููุงุฆู ููููุงู (ูู ุงูุฎุทุฉ ุงููุฏููุนุฉ)

### ูุฏููุงู ุนุจุฑ SQL:

```bash
# ุชุตุฏูุฑ ูุงุนุฏุฉ ุงูุจูุงูุงุช
pg_dump -h db.xxxxx.supabase.co \
  -U postgres \
  -d postgres \
  -f backup_$(date +%Y%m%d).sql

# ุงุณุชูุฑุงุฏ ูู backup
psql -h db.xxxxx.supabase.co \
  -U postgres \
  -d postgres \
  -f backup_20240101.sql
```

---

## ๐ ุงููุฒูุฏ ูู ุงููุตุงุฏุฑ

- ๐ [Supabase Documentation](https://supabase.com/docs)
- ๐ฅ [Supabase YouTube Channel](https://www.youtube.com/c/Supabase)
- ๐ฌ [Supabase Discord Community](https://discord.supabase.com)
- ๐ฆ [Supabase on Twitter](https://twitter.com/supabase)

---

## ๐ ุงูุฏุนู

ุฅุฐุง ูุงุฌูุช ุฃู ูุดููุฉ:

1. ๐ ุฑุงุฌุน ูุณู [ุงุณุชูุดุงู ุงูุฃุฎุทุงุก](#ุงุณุชูุดุงู-ุงูุฃุฎุทุงุก)
2. ๐ ุชุญูู ูู **Logs** ูู Supabase Dashboard
3. ๐ฌ ุงุณุฃู ูู Supabase Discord
4. ๐ง ุชูุงุตู ูุน ูุฑูู ุงูุชุทููุฑ

---

## โ Checklist - ูุงุฆูุฉ ุงูุชุญูู

ุงุณุชุฎุฏู ูุฐู ุงููุงุฆูุฉ ููุชุฃูุฏ ูู ุฅุชูุงู ูู ุงูุฎุทูุงุช:

### ุฅุนุฏุงุฏ Supabase:
- [ ] ุฅูุดุงุก ุญุณุงุจ Supabase
- [ ] ุฅูุดุงุก ูุดุฑูุน ุฌุฏูุฏ
- [ ] ุญูุธ URL ู API Keys

### ูุงุนุฏุฉ ุงูุจูุงูุงุช:
- [ ] ุชุดุบูู `complete_database_schema.sql`
- [ ] ุงูุชุญูู ูู ุฅูุดุงุก ุงูู 10 ุฌุฏุงูู
- [ ] ุงูุชุญูู ูู ุงูุจูุงูุงุช ุงูุงูุชุฑุงุถูุฉ
- [ ] ุงูุชุญูู ูู RLS Policies

### Storage:
- [ ] ุฅูุดุงุก bucket `images`
- [ ] ุฅูุดุงุก ุงููุฌูุฏุงุช (home, about, services, team, branding, uploads)
- [ ] ุฅุถุงูุฉ Storage Policies

### Authentication:
- [ ] ุชูุนูู Email Authentication
- [ ] ุฅูุดุงุก ูุณุชุฎุฏู Admin
- [ ] ุญูุธ ุจูุงูุงุช ุงูุฏุฎูู

### ุฑุจุท ุงููุดุฑูุน:
- [ ] ุฅูุดุงุก `.env.local`
- [ ] ุฅุถุงูุฉ SUPABASE_URL
- [ ] ุฅุถุงูุฉ SUPABASE_ANON_KEY
- [ ] ุฅุถุงูุฉ `.env.local` ูู `.gitignore`

### ุงูุงุฎุชุจุงุฑ:
- [ ] ุชุดุบูู ุงููุดุฑูุน ุจูุฌุงุญ
- [ ] ูุชุญ ุงูุตูุญุฉ ุงูุฑุฆูุณูุฉ
- [ ] ูุชุญ ุตูุญุงุช About, Services, Contact
- [ ] ุชุณุฌูู ุงูุฏุฎูู ููุฅุฏุงุฑุฉ
- [ ] ุชุนุฏูู ูุญุชูู ูุงุญุฏ ุนูู ุงูุฃูู
- [ ] ุฑูุน ุตูุฑุฉ ูุงุญุฏุฉ ุนูู ุงูุฃูู

---

## ๐ ุชูุงูููุง!

ุฅุฐุง ุฃุชููุช ุฌููุน ุงูุฎุทูุงุชุ ูุงุนุฏุฉ ุจูุงูุงุชู ุงูุขู ุฌุงูุฒุฉ ุจุงููุงูู! ๐

ุงููููุน ุงูุขู ูุนูู ุจุดูู ูุงูู ูุน:
- โ ูุงุนุฏุฉ ุจูุงูุงุช ุขููุฉ
- โ ุฑูุน ูุชุฎุฒูู ุงูุตูุฑ
- โ ููุญุฉ ุชุญูู ุฅุฏุงุฑูุฉ
- โ ูุธุงู ูุตุงุฏูุฉ

**ุงูุชุงูู:**
- ุงุณุชุจุฏู ุงูุจูุงูุงุช ุงูุงูุชุฑุงุถูุฉ ุจูุญุชูู ุญูููู
- ุงุฑูุน ุตูุฑ ุนุงููุฉ ุงูุฌูุฏุฉ
- ุฎุตุต ุงูุฃููุงู ูุงูุชุตููู
- ุงูุดุฑ ุงููููุน ุนูู Vercel ุฃู Netlify

---

**ุชู ุฅุนุฏุงุฏ ูุฐุง ุงูุฏููู ุจูุงุณุทุฉ:** Claude AI
**ุงูุชุงุฑูุฎ:** 2024
**ุงูุฅุตุฏุงุฑ:** 1.0

---

**ููุงุญุธุฉ ุฃุฎูุฑุฉ:** ๐ก

ูุฐุง ุงูุฏููู ุดุงูู ูููุตูุ ููู ูุง ุชุชุฑุฏุฏ ูู ุงูุณุคุงู ุฅุฐุง ูุงุฌูุช ุฃู ูุดููุฉ.
ูุงุนุฏุฉ ุงูุจูุงูุงุช ูุตููุฉ ุจุนูุงูุฉ ูุชููู ุณููุฉ ุงูุงุณุชุฎุฏุงู ูุขููุฉ ููุฑูุฉ.

**ุญุธุงู ููููุงู! ๐ฏ**
